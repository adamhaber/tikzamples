% A simple Pentagon with TiKZ
% Author: Christoph Gerum <gerum@informatik.uni-tuebingen.de>

\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}


\usepackage{tikz}
\usetikzlibrary{chains,shapes,arrows}
\usepackage{subfig}

\tikzset {pass/.style={
          rectangle,
          minimum size=5mm,
          very thick,
          draw=black!50,
          rounded corners=1.5mm,
          on chain,
          join
        }}


\tikzset{file/.style={
          rectangle,
          minimum size=5mm,
          very thick,
          draw=black!50,
          on chain,
          join
        }}


\begin{document}

\begin{figure}[htbp]
  \begin{center}
    \begin{tikzpicture}[
        start chain=going below,
        node distance=5mm,
        every join/.style={-latex',line width=0.8mm,draw=black!75,shorten >=0.5pt, shorten <=0.5pt}]
      \node (c)   [file] {Sourcecode C/C++};
      \node (fe)  [pass] {llvm-gcc/llvm-g++};
      \node (bc1) [file] {LLVM Bitcode};
      \node (opt) [pass] {LLVM Optimizer};
      \node (bc2) [file] {Optimierter Bitcode};
      \node (llc) [pass] {LLVM Backend};
      \node (as)  [file] {Target-Assembler};
    \end{tikzpicture}
  \end{center}
  
  \caption{Die LLVM Compiler Infrastructure}
  \label{fig:llvm}
\end{figure}

\begin{figure}[htbp]
  \begin{center}
    \begin{tikzpicture}[
        start chain=going below,
        node distance=5mm,
        every join/.style={-latex',line width=0.8mm,draw=black!75,shorten >=0.5pt, shorten <=0.5pt}]
      \node (c)   [file] {Sourcecode C/C++};
      \node (fe)  [pass] {llvm-gcc/llvm-g++};
      \node (opt) [pass] {LLVM Optimizer};
      \node (bc2) [file] {LLVM-IR};
      \node (vb)  [pass] {Virtuelles Backend};
      \node (va)  [file] {Virtueller Assembler};
      \node (perf) [pass] {Performance SchÃ¤tzung};
      \node (inst) [pass] {Instrumentierung};
      \node (bca) [file] {Annotierte IR};
      \node (llc) [pass] {LLVM Backend};
      \node (as)  [file] {Host-Assembler};
    \end{tikzpicture}
  \end{center}
  
  \caption{Die Instrumentierung von TotalProf}
  \label{fig:totalprof}
\end{figure}


\begin{figure}[htbp]
  \begin{center}
    \begin{tikzpicture}[
        start chain=going below,
        node distance=5mm,
        every join/.style={-latex',line width=0.8mm,draw=black!75,shorten >=0.5pt, shorten <=0.5pt}]
      \node (c)   [file] {Sourcecode SystemC};
      \node (fe)  [pass] {llvm-gcc/llvm-g++};
      \node (opt) [pass] {LLVM Optimizer};
      \node (bc2) [file] {Optimierter Bitcode};
      
      \node (llc) [pass] {Angepasstes LLVM Backend};
      \begin{scope}[start branch=as]
      \node (as)  [file, on chain=going below left] {Target-Assembler}; 
      \end{scope}
      \node (ibc)  [file, on chain=going below right] {Instrumentierter Bitcode}; 
      \node (llc) [pass] {Standard LLVM Backend};
      \node (tas)  [file] {Host-Assembler};
    \end{tikzpicture}
  \end{center}
  
  \caption{Die Instrumentierung des SystemC Abstract Realtime Operating System (SCAR)}
  \label{fig:scar}
\end{figure}



\end{document}
\end
